-- Crear la funcion del triger para actualizar la tabla "registro_refresh_mat_view"
CREATE
OR REPLACE FUNCTION update_registro_refresh_matview () RETURNS TRIGGER AS $$
BEGIN
	INSERT INTO "cortes_transversales"."registro_refresh_matview" (requiere_refresh)
VALUES
	('t') ; RETURN NULL ;
END ; $$ LANGUAGE plpgsql;

-- Drop trigger si existe
DROP TRIGGER
IF EXISTS tg_registro_refresh_matview ON "cortes_transversales"."cortes_segmentos";

-- Crear el trigger
CREATE TRIGGER tg_registro_refresh_matview AFTER INSERT
OR UPDATE
OR DELETE ON "cortes_transversales"."cortes_segmentos" FOR EACH STATEMENT EXECUTE PROCEDURE update_registro_refresh_matview ();